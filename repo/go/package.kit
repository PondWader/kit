export name = "go"

export install(version) {
    resp = fetch("https://go.dev/dl/go${version}.${sys.OS}-${sys.ARCH}.tar.gz")
    tar.gz.extract(resp).to("/")
    link_bin_dir("/bin")
}

export versions() {
    return fetch("https://proxy.golang.org/golang.org/toolchain/@v/list")
        .text()
        .trim()
        .split("\n")
        .map_to_set(l -> 
            l.cut_prefix_before('-').cut_suffix_after('.')
        )
}
