export name = "go"

export fn install(version) {
    resp = fetch("https://go.dev/dl/go${version}.${sys.OS}-${sys.ARCH}.tar.gz")
    tar.gz.extract(resp).to("/")
    link_bin_dir("/bin")
}

export fn versions() {
    return fetch("https://proxy.golang.org/golang.org/toolchain/@v/list")
        .text()
        .trim_whitespace()
        .split("\n")
        .map(l -> l.cut_prefix_before("-").cut_suffix_after("."))
}
